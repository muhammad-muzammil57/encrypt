<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Encrypt / Decrypt by Muzammil</title>

<style>
body{
    background:#020617;
    font-family:Arial;
    color:white;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    padding-top:30px;
    min-height:60vh;
    flex-wrap: wrap;
}
.box, .box-2{
    padding:20px;
    background:#020617;
    border:1px solid #1e293b;
    border-radius:10px;
    margin-bottom:20px;
}
.box-2{
     display: flex;
    flex-direction: column;
    margin-left: 20px;
    align-items: baseline;
}
textarea,input{
    width:96%;
    padding:10px;
    margin-top:10px;
    border-radius:10px;
    border:none;
}

textarea:focus{
    border: 4px solid green ;
    outline: none;
}
input:focus{
    border: 4px solid green;
}
button{
    margin-top:10px;
    padding:10px 18px;
    border:none;
    border-radius:6px;
    font-weight:bold;
    cursor:pointer;
}
.encrypt{ background:#22c55e; }
.decrypt{ background:#3b82f6; }
#output{ color:red; }

input {
  border: 0;
  outline: 0;
  font-size: 16px;
  border-radius: 320px;
  padding: 16px;
  background-color: #EBECF0;
  width: 100%;
  box-sizing: border-box;
  text-shadow: 1px 1px 0 #FFFFFF;
  box-shadow: inset 2px 2px 5px #BABECC,
              inset -5px -5px 10px #FFFFFF;
  transition: all 0.2s ease-in-out;
  appearance: none;
}
input:focus {
  box-shadow: inset 1px 1px 2px #BABECC,
              inset -1px -1px 2px #FFFFFF;
}

.h2{
    color: red;
}
.h4{
    color: gray;
}

button.unit {
  border-radius: 8px;
  width: 48px;
  height: 48px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  margin: 0 8px;
  font-size: 18px;
}
.btn-one{
    display: flex;
    align-items: center;
    justify-content: center;
    /* flex-wrap: wrap; */
}

/* ===================== MOBILE RESPONSIVE ===================== */
@media screen and (max-width: 600px){
    body{
        flex-direction: column;
        align-items: center;
        padding:10px;
    }
    .box, .box-2{
        width: 100%;
        margin-left: 0;
    }
    button.unit{
        width: 40px;
        height: 40px;
        font-size:16px;
        margin: 4px;
    }
}
</style>
</head>

<body>

<div class="box">
    <h2 class="h2">Encrypt Your Message With Password..!</h2>
    <h4 class="h4">Co Founder: Muhammad Muzammil</h4>
<label >
    <textarea id="input" rows="10" placeholder="Paste Your Plain or Encrypted Message here..."></textarea>
</label>
<label >
    <input type="password" id="password" placeholder="Password">
</label>
    <button class="encrypt" onclick="encrypt()">Encrypt</button>
    <button class="decrypt" onclick="decrypt()">Decrypt</button>

    <textarea id="output" rows="10" placeholder="Output" readonly></textarea>
</div>

<div class="box-2">
    <div class="btn-one">
    <button class="unit button-great" type="button">★</button>
    <h2 class="h2">Encrypter / Decrypter can make mistakes. Check important info</h2>
</div>

 <div class="btn-one">
    <button class="unit button-great" type="button">★</button>
    <h4>If You Forgot your message password, author will not be responsible.</h4>
</div>

<div class="btn-one">
    <button class="unit button-great" type="button">★</button>
    <h4>Double check your important information before encryption and decryption.</h4>
</div>

<div class="btn-one">
    <button class="unit button-great" type="button">★</button>
    <h4>Data will automatically delete after 2 hours, so check data in given time.</h4>
</div>

<div class="btn-one">
    <button class="unit button-great" type="button">★</button>
    <h4>We are trying our best to improve it and soon you will be able to check data in 3 days.</h4>
</div>

</div>

<script>
// ================= COOKIE HELPERS =================
function setCookie(name, value, days) {
    const d = new Date();
    d.setTime(d.getTime() + (days*24*60*60*1000));
    const expires = "expires="+ d.toUTCString();
    document.cookie = name + "=" + encodeURIComponent(value) + ";" + expires + ";path=/";
}

function getCookie(name) {
    const cname = name + "=";
    const decodedCookie = decodeURIComponent(document.cookie);
    const ca = decodedCookie.split(';');
    for(let c of ca) {
        while(c.charAt(0) === ' ') c = c.substring(1);
        if(c.indexOf(cname) === 0) return c.substring(cname.length, c.length);
    }
    return "";
}

// ================= ENCRYPT / DECRYPT =================
function passwordKey(password){
    return [...password].reduce((sum,c)=>sum+c.charCodeAt(0),0);
}

function encrypt(){
    const text = input.value;
    const pass = password.value;
    if(!text || !pass) return alert("Message and Password are required");

    const key = passwordKey(pass);
    const salt = Math.floor(Math.random()*90)+10;

    let encrypted = [];
    for(let c of text){
        encrypted.push(c.charCodeAt(0) + key + salt);
    }

    const result = salt + ":" + encrypted.join(",");
    output.value = result;

    // Store in cookie for 3 days
    setCookie("encryptedData", result, 3);

    // Clear input fields
    input.value = "";
    password.value = "";
}

function decrypt(){
    const data = input.value || getCookie("encryptedData"); // fallback to cookie if input empty
    const pass = password.value;
    if(!data || !pass) return alert("Enter your encrypted message and password");

    try{
        const [salt, cipher] = data.split(":");
        const key = passwordKey(pass);
        const numbers = cipher.split(",").map(Number);

        let text="";
        for(let n of numbers){
            const code = n - key - Number(salt);
            if(code < 32 || code > 126) throw "Wrong password";
            text += String.fromCharCode(code);
        }

        output.value = text;

        // Clear input fields
        input.value = "";
        password.value = "";
    }
    catch{
        alert("Password is wrong or invalid data");
    }
}

// ================= LOAD DATA FROM COOKIE ON START =================
window.onload = () => {
    const saved = getCookie("encryptedData");
    if(saved){
        input.value = saved;
    }
};
</script>

</body>
</html>

